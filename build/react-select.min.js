!function(e){var t=e.createElement,n="prototype",i="bind",a="state",s="props",r="exports",l="setState",c="PropTypes",o="func",u="bool",d="string",p="findDOMNode",f="refs",h="push",m="map",v="length",y="replace",g="preventDefault",b="stopPropagation",N="allowCreate",C="className",O="disabled",S="onChange",k="options",I="placeholder",w="searchable",F="value",W="isFocused",V="isLoading",E="isOpen",D="input";!function(e){function t(i){if(n[i])return n[i][r];var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a[r],a,a[r],t),a.loaded=!0,a[r]}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(n,r,y){var I=y(1),M=y(2),P=y(3),z=function(e,t){var n=document;!n.addEventListener&&n.attachEvent?n.attachEvent("on"+e,t):n.addEventListener(e,t)},x=function(e,t){var n=document;!n.removeEventListener&&n.detachEvent?n.detachEvent("on"+e,t):n.removeEventListener(e,t)},T=function(e,t){var n=t.target?t.target:t.srcElement;if(null==n.parentElement&&n!=document.body.parentElement)return!1;for(;null!=n;){if(-1!=e.indexOf(n))return!1;n=n.parentElement}return!0},L=function(t){var n=this;n[a][E]&&T([e[p](n[f].wrapper)],t)&&n[l]({isOpen:!1},n._unbindCloseMenuIfClickedOutside)};window.Select=e.createClass({displayName:"Select",created:[],selected:[],options:[],propTypes:{isFocused:e[c][u],isOpen:e[c][u],searchable:e[c][u],disabled:e[c][u],multi:e[c][u],menu:e[c][o],match:e[c][o],item:e[c][o],options:e[c].array,selected:e[c].array,created:e[c].array,onChange:e[c][o],placeholderPrompt:e[c][d],nonMatchPrompt:e[c][d]},getDefaultProps:function(){return{menu:function(e,t){return e.label},match:function(e,t,n){return-1!==e.label.indexOf(n)||-1!==e[F].indexOf(n)},item:function(e){return e.label},isFocused:!1,isOpen:!1,searchable:!0,multi:!0,disabled:!1,options:[],selected:[],created:[],placeholderPrompt:"请选择...",nonMatchPrompt:"没有查找结果"}},getInitialState:function(){var e=this,t=e[s];return e.selected=e.dealSelected(t.selected,!0),e.created=t.created,{isFocused:t[W],isLoading:t[E],inputValue:"",options:t[k]}},componentWillReceiveProps:function(e){var t=this,n=t[s];JSON.stringify(e[k])!==JSON.stringify(n[k])&&(t.selected=t.dealSelected(n.selected,!0),t.created=n.created),t.forceUpdate()},dealSelected:function(e,t){var n=this,i=[];return e.forEach(function(e,a){if("number"==typeof e)e%=n[s][k][v],i[h](t?e:n[s][k][e]);else if("object"==typeof e){var r=n[s][k].indexOf(e);-1!==r&&i[h](t?r:e)}}),i},creatMenu:function(e){var n=this,r=[];return e=e||"",n[s][k].forEach(function(a,l){-1!==n.selected.indexOf(l)||e[v]&&!n[s].match(a,l,e)||r[h](t("div",{className:I+"option",key:l,onClick:n.selectOption[i](n,a,l)},n[s].menu(a,l)))}),t("div",{className:I+"menu-outer"},t("div",{className:I+"menu"},r[v]?r:n[a].inputValue[v]?t("div",{className:I+"noresults"},n[s].nonMatchPrompt):null))},selectOption:function(e,t,n){n[b](),n[g]();var i=this;i[s][O]||(i[s].multi?i.selected[h](t):i.selected=[t],i[l]({inputValue:""}),i.dealChange())},dealChange:function(){var e=this;e[s][S](JSON.parse(JSON.stringify(e.dealSelected(e.selected))),JSON.parse(JSON.stringify(e.created)))},createItems:function(){var e=this,n=e.selected[m](function(n,a){var r=e[s][k][n];return t("div",{className:I+"item",key:a,onClick:e.inputFocus},t("span",{className:I+"item-icon",onClick:e.removeItem[i](e,r,a)},"×"),t("span",{className:I+"item-label"},e[s].item(r)))},e),a=e.created[m](function(n,a){return t("div",{className:I+"item",key:a,onClick:e.inputFocus},t("span",{className:I+"item-icon",onClick:e.removeCreate[i](e,n,a)},"×"),t("span",{className:I+"item-label"},e[s].item(n)))},e);return n.concat(a)},removeItem:function(e,t,n){n[b](),n[g]();var i=this;i[s][O]||(i.selected.splice(t,1),i.forceUpdate(),i.dealChange())},removeCreate:function(e,t,n){n[b](),n[g]();var i=this;i[s][O]||(i.created.splice(t,1),i.forceUpdate())},inputFocus:function(e){e[b](),e[g]();var t=this;t[s][O]||(t[s][w]?t[f][D].focus():t[l]({isFocused:t[s][w],isOpen:!0},t.bindOutside))},bindOutside:function(){z("click",L[i](this))},unbindOutside:function(){x("click",L[i](this))},createInput:function(){var e=this;return t(M,{value:e[a].inputValue,ref:"input",onChange:e.onInputChange,onFocus:function(){e[l]({isFocused:!0,isOpen:!0},e.bindOutside)},onBlur:function(){e[a].inputValue[v]||e[l]({isFocused:!1})},className:I+"input",tabIndex:e[s].tabIndex||0,minWidth:"5"})},onInputChange:function(t){var n=this;n[s][O]||(t.target[F],n[l]({inputValue:e[p](n[f][D][f][D])[F]}))},createDummyInput:function(){return t("div",{ref:"input",className:I+"input",onClick:this.inputFocus,style:{display:"inline-block"}}," ")},createHolder:function(e){return e=e||this[s].placeholderPrompt,t("div",{className:I+"placeholder",onClick:this.inputFocus,dangerouslySetInnerHTML:{__html:e}})},clearValue:function(e){e[b](),e[g]();var t=this;t[s][O]||(t.selected=[],t.created=[],t[l]({inputValue:""}),t.dealChange())},menuToggle:function(e){e[b](),e[g]();var t=this;t[s][O]||t[l]({isOpen:!t[a][E]})},handleKeyDown:function(e){var t=this;if(!t[s][O]){switch(e.keyCode){case 8:return void(t[a].inputValue[v]||(t.selected.splice(t.selected[v]-1,1),t.forceUpdate()));case 9:if(e.shiftKey||!t[a][E]||!t[a].focusedOption)return;break;case 13:if(!t[a][E])return;break;case 27:t[a][W]&&t.clearValue(e);break;case 38:t[a][W];break;case 40:t[a][W];break;case 188:if(!(t[a][W]&&t[s][N]&&t[s].multi))return;e[g](),e[b]();break;default:return}e[g]()}},render:function(){var e,n=this,i=n[s],r=n[a],l=n.selected[v]+n.created[v],c=P("select",n[s][C],{"is-multi":i.multi&&l,"is-searchable":i[w],"is-open":r[E],"is-focused":r[W],"is-loading":r[V],"is-disabled":i[O],"has-value":n.selected[v]+n.created[v]});if(i.multi)e=t("div",{className:I+"control",onClick:n.inputFocus,onKeyDown:n.handleKeyDown},l?n.createItems():null,i[w]?n.createInput():n.createDummyInput(),l||r.inputValue[v]?null:n.createHolder(),t("span",{className:I+"arrow",onClick:n.menuToggle}),l?t("span",{className:I+"clear",onClick:n.clearValue},"×"):null);else{var o=n.selected[v]?i.item(i[k][n.selected[0]]):n.created[v]?i.item(i[k][n.created[0]]):null;e=t("div",{className:I+"control",onClick:n.inputFocus,onKeyDown:n.handleKeyDown},l?n.createHolder(r.inputValue[v]?"&nbsp;":o):null,i[w]?n.createInput():n.createDummyInput(),l||r.inputValue[v]?null:n.createHolder(),t("span",{className:I+"arrow",onClick:n.menuToggle}),l?t("span",{className:I+"clear",onClick:n.clearValue},"×"):null)}return t("div",{className:c,ref:"wrapper"},e,r[E]?n.creatMenu(r.inputValue):null)}})},function(e,t){e[r]="select-"},function(i,u){var h=Object.assign||function(e){for(var t=1;t<arguments[v];t++){var i=arguments[t];for(var a in i)Object[n].hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},m={position:"absolute",visibility:"hidden",height:0,width:0,overflow:"scroll",whiteSpace:"nowrap"};i[r]=e.createClass({displayName:"exports",propTypes:{value:e[c].any,defaultValue:e[c].any,onChange:e[c][o],style:e[c].object,className:e[c][d],minWidth:e[c].oneOfType([e[c].number,e[c][d]]),inputStyle:e[c].object,inputClassName:e[c][d]},getDefaultProps:function(){return{minWidth:1}},getInitialState:function(){return{inputWidth:this[s].minWidth}},componentDidMount:function(){this.copyInputStyles(),this.updateInputWidth()},componentDidUpdate:function(){this.updateInputWidth()},copyInputStyles:function(){var t=this;if(t.isMounted()&&window.getComputedStyle){var n=window.getComputedStyle(e[p](this[f][D])),i=e[p](this[f].sizer);if(i.style.fontSize=n.fontSize,i.style.fontFamily=n.fontFamily,t[s][I]){var a=e[p](this[f].placeholderSizer);a.style.fontSize=n.fontSize,a.style.fontFamily=n.fontFamily}}},updateInputWidth:function(){var t=this;if(t.isMounted()&&"undefined"!=typeof e[p](this[f].sizer).scrollWidth){var n;n=t[s][I]?Math.max(e[p](this[f].sizer).scrollWidth,e[p](this[f].placeholderSizer).scrollWidth)+2:e[p](this[f].sizer).scrollWidth+2,n<t[s].minWidth&&(n=t[s].minWidth),n!==t[a].inputWidth&&t[l]({inputWidth:n})}},getInput:function(){return this[f][D]},focus:function(){e[p](this[f][D]).focus()},select:function(){e[p](this[f][D]).select()},render:function(){var e=(this[s][F]||"")[y](/\&/g,"&amp;")[y](/ /g,"&nbsp;")[y](/\</g,"&lt;")[y](/\>/g,"&gt;"),n=this[s].style||{};n.display="inline-block";var i=this[s].inputStyle||{};i.width=this[a].inputWidth;var r=this[s][I]?t("div",{ref:"placeholderSizer",style:m},this[s][I]):null;return t("div",{className:this[s][C],style:n},t("input",h({},this[s],{ref:"input",className:this[s].inputClassName,style:i})),t("div",{ref:"sizer",style:m,dangerouslySetInnerHTML:{__html:e}}),r)}})},function(e,t){e[r]=function(){for(var e="",t=0;t<arguments[v];t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e+=" "+n;else if(Array.isArray(n))e+=" "+classNames.apply(null,n);else if("object"===i)for(var a in n)n.hasOwnProperty(a)&&n[a]&&(e+=" "+a)}}return e.substr(1)}}])}(React);